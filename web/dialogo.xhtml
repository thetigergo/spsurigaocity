<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <p:commandButton id="showDialogButton" type="button" value="Show" onclick="dlg.show()" />

        <p:dialog header="Enter FirstName" widgetVar="dlg" resizable="false" modal="true">
            <h:form id="form" enctype="multipart/form-data">
                <p:panel header="Partial Process">  

                    <h:panelGrid id="grid" columns="1">  
                        <f:facet name="header">  
                            <p:messages />  
                        </f:facet>  

                        <p:inputText id="xiong" value="#{fileUploadController.refKey}"/>

                        <br/>
                        <br/>

                        <p:fileUpload id="file" value="#{fileUploadController.upFile}" mode="simple" showButtons="false" label="Attach" allowTypes="/(\.|\/)(pdf)$/"/>
                    </h:panelGrid>  

                </p:panel> 

                <br/>
                <br/>

                <p:commandButton value="Submit" actionListener="#{fileUploadController.uploadFile()}" process="@this,file" update="grid" oncomplete="dlg.hide();"/>

                <p:growl id="messages" showDetail="true"/>

            </h:form>

            <!--h:form id="form">

                <h:panelGrid columns="2" style="margin-bottom:10px">
                    <h:outputLabel for="firstname" value="Firstname:" />
                    <p:inputText id="firstname" value="#pprBean.firstName}" />
                </h:panelGrid>

                <p:commandButton id="submitButton" value="Submit" update=":display" oncomplete="dlg.hide();"/>

            </h:form-->
        </p:dialog>

        <p:outputPanel id="display" style="display:block;margin-top:10px;">
            <h:outputText id="name" value="Hello #{fileUploadController.refKey}" rendered="#{not empty fileUploadController.refKey}"/>
        </p:outputPanel>


    </h:body>
</html>

